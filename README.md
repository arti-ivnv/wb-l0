# wb-l0

## About
Тестовое задание реализованное для tech.wildberries.ru

Суммарное время выполнения: 4 дня.

#### Services
<u>kafka-producer</u>
Сервис, который симулирует исходящие запросы от продьесера кафки. В сервисе реализован рандомайзер полей. Каждое сообщение будет иметь уникальное наполнение полей.

<u>migrator</u>
Сервис для бд миграций.

<u>order-service</u>
Основной сервис, который исполняет бизнес логику описанную в ТЗ. 


#### Setup
Первым делом, нужно экспортировать конфигурационный файл

```
export CONFIG_PATH=config/local.yaml
```

Далее приложение использует систему таск файлов.
1) Запускаем таск для docker-compose. Он запустит pg, kafka, zookeeper, kafka-ui.
```
task app:run-docker-compose
```
2) В kafka-ui создать топик
2) Запускаем сервис симуляции в отдельном терминале
```
task app:run-simulator   
```
3) При первом запуске запускаем полный старт приложения. Для того, чтобы прошли новые (если есть) миграции. В принципе последующие запуски можно тоже делать через полный запуск, но будет чуть медленнее из-за migrator'а.
```
task app:full-start
```
4) Дальнейше запуски можно проводить через обычный старт для запуска order-service
```
task app:run
```